	
	<!doctype html>
<html lang="en">
  <head>    
    <title>ALEXFINN - ページのタイトル</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

    
    <link href="/css/milk.min.css" rel="stylesheet">
    <link href="/css/milk-responsive.min.css" rel="stylesheet">     
    <link href="/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/fonts.css" rel="stylesheet" type="text/css" media="all">
    <link rel="shortcut icon" href="/images/alexfinn.ico"> 
    <link rel="apple-touch-icon" href="">
    <link rel="canonical" href="http://example.org/page/">

    
    <link href="/rss.xml" type="application/atom+xml" rel="alternate" title="My New Hugo Site">    

  </head>
  <body>    
    <div class="navbar navbar-fixed-top">        
  <div id="navbar-inner">
          <div id="logo">
            <a href=""><img src="/images/letter-a.png" width="100px"></img></a>
          </div>
  </div>
</div>


<div class="container">
  <div class="content">
    <div class="row-fluid">
      <div class="span12">
        <div class="posts">
      

	    
	  <div class="post">
	    <header class="post-header">
	        <h1><a href="/page/">ページのタイトル</a></h1>
	        <div class="post-time">March 6 2017</div>
	    </header>
	    <div class="post-after">
	        <div class="tags">
	            
	        </div>
	    </div>
	    <hr>
	    <div class="post content">
	        

<h1 id="エクセルの代わり奴">エクセルの代わり奴〜</h1>

<p><script src="//gist.github.com/spf13/7896402.js"></script>

<div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
  <iframe src="//www.youtube.com/embed/w7Ft2ymGmfc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0"></iframe>
 </div>
</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#!/usr/bin/env python</span>
<span style="color: #75715e"># -*- coding: utf-8 -*-</span>

<span style="color: #f92672">import</span> <span style="color: #f8f8f2">matplotlib.pyplot</span> <span style="color: #f92672">as</span> <span style="color: #f8f8f2">plt</span>
<span style="color: #f92672">import</span> <span style="color: #f8f8f2">matplotlib.font_manager</span>
<span style="color: #f92672">from</span> <span style="color: #f8f8f2">matplotlib</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">font_manager</span> <span style="color: #66d9ef">as</span> <span style="color: #f8f8f2">fm</span>

<span style="color: #75715e"># for Mac</span>
<span style="color: #f8f8f2">font_path</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;/Library/Fonts/Osaka.ttf&#39;</span>

<span style="color: #f8f8f2">font_prop</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">matplotlib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">font_manager</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">FontProperties(fname</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">font_path)</span>
<span style="color: #f8f8f2">matplotlib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rcParams[</span><span style="color: #e6db74">&#39;font.family&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">font_prop</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get_name()</span>
<span style="color: #75715e"># pdfのフォントをTrueTypeに変更</span>
<span style="color: #f8f8f2">matplotlib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rcParams[</span><span style="color: #e6db74">&#39;pdf.fonttype&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">42</span>
<span style="color: #75715e"># defaultのdpi=100から変更</span>
<span style="color: #f8f8f2">matplotlib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rcParams[</span><span style="color: #e6db74">&#39;savefig.dpi&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">300</span>
<span style="color: #f8f8f2">matplotlib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rcParams[</span><span style="color: #e6db74">&#39;lines.linewidth&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span>
<span style="color: #75715e"># 数式（Latex)のフォントを変更</span>
<span style="color: #f8f8f2">matplotlib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rcParams[</span><span style="color: #e6db74">&#39;mathtext.default&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;regular&#39;</span>

<span style="color: #75715e"># 500px x 300px の画像を生成</span>
<span style="color: #f8f8f2">fig</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">plt</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">figure(figsize</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">6</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">),</span> <span style="color: #f8f8f2">dpi</span><span style="color: #f92672">=</span><span style="color: #ae81ff">100</span><span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">ax</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">fig</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">add_subplot(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># これが無いと楕円になる</span>
<span style="color: #f8f8f2">ax</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set_aspect(</span><span style="color: #e6db74">&#39;equal&#39;</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># filename = u&#39;「ほげほげタイトル」&#39;</span>

<span style="color: #f8f8f2">fig</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">suptitle(filename)</span>
<span style="color: #f8f8f2">filename</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">filename</span> <span style="color: #f92672">+</span> <span style="color: #e6db74">&#39;.png&#39;</span>

<span style="color: #f8f8f2">data</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">10</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">20</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">30</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">40</span><span style="color: #f8f8f2">]</span>

<span style="color: #f8f8f2">labels</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">u&#39;あった&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">u&#39;すこしあった&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">u&#39;あまり無かった&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">u&#39;無かった&#39;</span><span style="color: #f8f8f2">]</span>

<span style="color: #75715e"># colors = [&#39;#ef9a9a&#39;, &#39;#FFCC80&#39;, &#39;#81D4FA&#39;]</span>
<span style="color: #f8f8f2">colors</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&#39;#ef9a9a&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;#FFCC80&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;#A5D6A7&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;#81D4FA&#39;</span><span style="color: #f8f8f2">]</span>
<span style="color: #75715e"># colors = [&#39;#ef9a9a&#39;, &#39;#FFCC80&#39;, &#39;#FFF59D&#39;, &#39;#A5D6A7&#39;, &#39;#81D4FA&#39;]</span>
<span style="color: #75715e"># https://www.materialui.co/colors</span>

<span style="color: #75715e"># 10%以下の比率の場合はパーセントを表示しない</span>
<span style="color: #f8f8f2">(_,</span> <span style="color: #f8f8f2">texts,</span> <span style="color: #f8f8f2">autotexts)</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">ax</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">pie(data,</span> <span style="color: #f8f8f2">colors</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">colors,</span> <span style="color: #f8f8f2">labels</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">labels,</span>
    <span style="color: #f8f8f2">startangle</span><span style="color: #f92672">=</span><span style="color: #ae81ff">90</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">counterclock</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">False,</span>
    <span style="color: #75715e"># autopct=lambda p: &#39;{:.1f}%&#39;.format(p) if p &gt;= 10 else &#39;&#39;)</span>
    <span style="color: #f8f8f2">autopct</span><span style="color: #f92672">=</span><span style="color: #66d9ef">lambda</span> <span style="color: #f8f8f2">p:</span> <span style="color: #e6db74">&#39;{:.1f}%&#39;</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">format(p)</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">p</span> <span style="color: #f92672">&gt;=</span> <span style="color: #ae81ff">1</span> <span style="color: #66d9ef">else</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">)</span>

<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">texts:</span>
  <span style="color: #f8f8f2">text</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set_visible(False)</span>

<span style="color: #75715e"># 座標はfigsizeの比率によって微調整が必要</span>
<span style="color: #f8f8f2">box</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">ax</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get_position()</span>
<span style="color: #f8f8f2">ax</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set_position([</span><span style="color: #f92672">-</span><span style="color: #ae81ff">0.08</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">box</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">y0,</span> <span style="color: #f8f8f2">box</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">width,</span> <span style="color: #f8f8f2">box</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">height])</span>
<span style="color: #f8f8f2">ax</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">legend(loc</span><span style="color: #f92672">=</span><span style="color: #e6db74">&#39;center left&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">bbox_to_anchor</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">0.5</span><span style="color: #f8f8f2">),</span> <span style="color: #f8f8f2">prop</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;size&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">10</span><span style="color: #f8f8f2">})</span>

<span style="color: #f8f8f2">proptease</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">fm</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">FontProperties()</span>
<span style="color: #f8f8f2">proptease</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set_size(</span><span style="color: #e6db74">&#39;xx-small&#39;</span><span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">plt</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">setp(autotexts,</span> <span style="color: #f8f8f2">fontproperties</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">proptease)</span>
<span style="color: #f8f8f2">plt</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">setp(texts,</span> <span style="color: #f8f8f2">fontproperties</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">proptease)</span>

<span style="color: #f8f8f2">fig</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">savefig(filename)</span>
<span style="color: #f8f8f2">plt</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">close(fig)</span>
</pre></div>

	    </div>
	    
	<div class="about">
	<p> 
     
    </p>
</div>
		<nav id="pagination">
			
			<a class="next" href="http://example.org/">Next</a>
		</nav>
	
		        <footer>
		        	Built with <a href="https://github.com/spf13/hugo">Hugo</a> 
		        	<p>© Alexander Ivanov 2014</p>
		        </footer>
		    </div>
		  </div>    
		</div>
      </div>
    </div>
</body>

<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + ":change-me";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 4]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
    g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://change-me" style="border:0;" alt="" /></p></noscript>


</html>

